<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta charset='utf-8' />
<link href='https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css' rel='stylesheet'>
<link href='https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css' rel='stylesheet'>
<script src='../dist/index.global.min_custom.js'></script>
<script src='../bootstrap5/plugin/index.global.min.js'></script>
<script>

  document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('calendar');

    var calendar = new FullCalendar.Calendar(calendarEl, {
	  headerToolbar: {
        left: 'title',
        center: '',
        right: 'today prev,next'
      },
      buttonIcons: {
		  prev: 'bi-chevron-left',
		  next: 'bi-chevron-right'
	  },
	  buttonText: {
		  today: '오늘'
	  },
	  dayCellDidMount: function(e,aa) {
        if (e.date.getDay() === 0) {
			const eltarget = e.el.querySelector('.fc-daygrid-day-number')
			if(eltarget){
				eltarget.style.color = '#eb5a5b'; // 예시 색상
			}
        }
      },
	  themeSystem: 'bootstrap5',
      locale: 'ko',
      contentHeight: 600,
      initialDate: '2023-01-12',
      selectable: true,
      dateClick: function(date) {

		console.log("date : ", date);

        calendar.unselect()
      },
      eventClick: function(arg) {
		  
		const event = arg.event;
		
		const id = event.id;
		 
		const title = event.title;
		const allDay = event.allDay;
		
		const start = event.start;
		const startYear = start?.getFullYear();
		const startMonth = start ? start.getMonth() + 1 : undefined;
		const startDate = start?.getDate();
		const startDay = start?.getDay();
		const startHour = start?.getHours();
		const startMinute = start?.getMinutes();

		const end = event.end
		const endYear = end?.getFullYear();
		const endMonth = end ? end.getMonth() + 1 : undefined;
		const endDate = end?.getDate();
		const endDay = end?.getDay();
		const endHour = end?.getHours();
		const endMinute = end?.getMinutes();
		
		const dayOfWeek = day => {
			switch (day) {
			  case 0: return '일'; break;
			  case 1: return '월'; break;
			  case 2: return '화'; break;
			  case 3: return '수'; break;
			  case 4: return '목'; break;
			  case 5: return '금'; break;
			  case 6: return '토'; break;
			  default: return null;
			}
		}
		
		const dateInfo = {year: startYear, month: startMonth, date: startDate};
		console.log("dateInfo : ", dateInfo);
		
		const eventInfo = {
			id, title, allDay, 
			start: {start: start?.toString(), startYear, startMonth, startDate, startDay: dayOfWeek(startDay), startHour, startMinute},
			end: {end: end?.toString(), endYear, endMonth, endDate, endDay: dayOfWeek(endDay), endHour, endMinute},
		}
		console.log("eventInfo : ", eventInfo)
      },
      dayMaxEvents: true, // allow "more" link when too many events
      events: [
        {
		  id: '0001',
          title: 'All Day Event',
          start: '2023-01-01',
        },
        {
		  id: '0002',
          title: 'Long Event',
          start: '2023-01-07',
          end: '2023-01-10'
        },
        {
		  id: '0003',
          title: 'Long Event1',
          start: '2023-01-07',
          end: '2023-01-10'
        },
        {
		  id: '0004',
          title: 'Long Event2',
          start: '2023-01-07',
          end: '2023-01-09'
        },
        {
          groupId: 999,
          title: 'Repeating Event',
          start: '2023-01-09T16:00:00'
        },
        {
          groupId: 999,
          title: 'Repeating Event',
          start: '2023-01-16T16:00:00'
        },
        {
          title: 'Conference',
          start: '2023-01-11',
          end: '2023-01-13'
        },
        {
          title: 'Meeting',
          start: '2023-01-12T10:30:00',
          end: '2023-01-12T12:30:00'
        },
        {
          title: 'Lunch',
          start: '2023-01-12T12:00:00'
        },
        {
          title: 'Meeting',
          start: '2023-01-12T14:30:00'
        },
        {
          title: 'Happy Hour',
          start: '2023-01-12T17:30:00'
        },
        {
          title: 'Dinner',
          start: '2023-01-12T20:00:00'
        },
        {
          title: 'Birthday Party',
          start: '2023-01-14T07:00:00'
        },
        {
          title: 'Click for Google',
          start: '2023-01-28'
        }
      ]
    });

    calendar.render();
  });

</script>
<style>

  body {
    margin: 40px 10px;
    padding: 0;
    font-family: Arial, Helvetica Neue, Helvetica, sans-serif;
  }

  #calendar {
    max-width: 1100px;
    margin: 0 auto;
    font-size: 18px;
  }
  .fc-popover .fc-daygrid-event, .fc-popover-title {
	font-size: 20px;
  }
  .fc-event-time {
	display: none;
  }
  .fc-col-header-cell.fc-day-sun {
	color: #eb5a5b;
  }
</style>
</head>
<body>

  <div id='calendar'></div>

</body>
</html>
